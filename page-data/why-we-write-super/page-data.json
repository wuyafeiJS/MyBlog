{"componentChunkName":"component---src-templates-blog-post-js","path":"/why-we-write-super/","result":{"data":{"site":{"siteMetadata":{"title":"Trace of Front-end","author":"Yafei Wu"}},"markdownRemark":{"id":"d657ef82-6e3f-547f-8004-3089e6db6e0b","excerpt":"å…¶å®è¿™ä¸ªç–‘é—®å¯¹äºä½ æ­£å¸¸çš„ä½¿ç”¨ React æ¥è¯´å¹¶ä¸é‡è¦ï¼Œä½†å¦‚æœä½ æƒ³æ·±æŒ– React çš„å·¥ä½œåŸç†ï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°å®ƒçš„æœ‰è¶£ä¹‹å¤„ ç¬¬ä¸€ç‚¹ æˆ‘å†™çš„æ¬¡æ•°æ¯”æˆ‘æƒ³åˆ°çš„è¿˜å¤šã€‚ å½“ç„¶ï¼Œæ–°çš„class fields ææ¡ˆè®©æˆ‘ä»¬é¿å…äº†è¿™æ®µä»£ç ï¼š è¿™ç§è¯­æ³•åœ¨ React 0.1â€¦","html":"<p><strong>å…¶å®è¿™ä¸ªç–‘é—®å¯¹äºä½ æ­£å¸¸çš„ä½¿ç”¨ <em>React</em> æ¥è¯´å¹¶ä¸é‡è¦ï¼Œä½†å¦‚æœä½ æƒ³æ·±æŒ– <em>React</em> çš„å·¥ä½œåŸç†ï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°å®ƒçš„æœ‰è¶£ä¹‹å¤„</strong></p>\n<p>ç¬¬ä¸€ç‚¹</p>\n<hr>\n<p>æˆ‘å†™<code class=\"language-text\">super(props)</code>çš„æ¬¡æ•°æ¯”æˆ‘æƒ³åˆ°çš„è¿˜å¤šã€‚</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span></span>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isOn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ...</span></code></pre></div>\n<p>å½“ç„¶ï¼Œæ–°çš„<a href=\"https://github.com/tc39/proposal-class-fields\">class fields ææ¡ˆ</a>è®©æˆ‘ä»¬é¿å…äº†è¿™æ®µä»£ç ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    isOn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è¿™ç§è¯­æ³•åœ¨ React 0.13 ç‰ˆæœ¬å¾—åˆ°æ”¯æŒã€‚è€Œä¸”è¿™ç§å†™æ³•ä¹Ÿæ›´åŠ ç¬¦åˆäººä½“å·¥å­¦ã€‚</p>\n<p>è®©æˆ‘ä»¬ç»§ç»­å›åˆ°è¿™ä¸ªä¾‹å­ï¼Œå®ƒç”¨åˆ°äº† es6 çš„ç‰¹æ€§ï¼š</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span></span>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      isOn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ<strong>æˆ‘ä»¬ä¸ºå•¥è¦è°ƒç”¨ superï¼Ÿ æˆ‘ä»¬å¯ä»¥ä¸ç”¨å®ƒå—ã€‚å¦‚æœæˆ‘ä»¬è°ƒç”¨å®ƒï¼Œä½†æ˜¯ä¸åŠ  props ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå®ƒè¿˜æœ‰å…¶ä»–çš„å‚æ•°å—ï¼Ÿ</strong> è®©æˆ‘ä»¬æ¥æ¢ç´¢ä¸€ä¸‹ã€‚</p>\n<hr>\n<p>åœ¨ js ä¸­ï¼Œ<code class=\"language-text\">super</code> å…³è”åˆ°çˆ¶çº§ class çš„ constructorã€‚ï¼ˆåœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå®ƒæŒ‡å‘<code class=\"language-text\">React.Component</code>ï¼‰</p>\n<p>é‡ç‚¹æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨çˆ¶çº§<code class=\"language-text\">class constructor</code>åä½¿ç”¨ <code class=\"language-text\">this</code>ã€‚ä¹Ÿå°±æ˜¯åœ¨<code class=\"language-text\">super()</code>ä¹‹å‰æ˜¯ä¸èƒ½ç”¨<code class=\"language-text\">this</code>çš„ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Components</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//ğŸ”´ è¿™é‡Œè¿˜ä¸èƒ½ä½¿ç”¨`this`</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// è¿™é‡Œå°±å¯ä»¥ä½¿ç”¨äº†</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isOn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>æˆ‘ä»¬æœ‰ä¸ªå¾ˆå¥½çš„ç†ç”±å»è§£é‡Šä¸ºå•¥ Javascript å¼ºåˆ¶ è°ƒç”¨çˆ¶çº§ constructor è¦åœ¨ä½¿ç”¨ this å‰æ‰§è¡Œã€‚æˆ‘ä»¬æƒ³æƒ³ class çš„å±‚çº§ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PolitePerson</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">greetColleagues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ğŸ”´ è¿™æ˜¯ä¸è¢«å…è®¸çš„</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">greetColleagues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Good morning folks'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨<code class=\"language-text\">super</code>ä¹‹å‰è°ƒç”¨ thisã€‚ä¸€æ®µæ—¶é—´åï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¿®æ”¹ä¸‹<code class=\"language-text\">greetColleagues</code>ï¼Œå¦‚åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢è°ƒç”¨<code class=\"language-text\">this.name</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token function\">greetColleagues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Good morning folks!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'My name is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">', nice to meet you!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä½†æ˜¯æˆ‘ä»¬å¿˜äº† <code class=\"language-text\">this.greetColleagues()</code> æ˜¯åœ¨ super ä¹‹å‰è°ƒç”¨äº†ï¼Œè¿™æ—¶å€™<code class=\"language-text\">this.name</code>å‹æ ¹ä¸å­˜åœ¨ã€‚å¦‚ä½ æ‰€è§ï¼Œè¿™ç§ä»£ç æ˜¯å¾ˆè ¢çš„ã€‚</p>\n<p>ä¸ºäº†é¿å…è¿™ä¸ªé™·é˜±ï¼Œ <strong>JS å¼ºåˆ¶åœ¨è°ƒç”¨<code class=\"language-text\">this</code>å‰å…ˆå¾—è°ƒç”¨<code class=\"language-text\">super</code>.</strong> è¿™ä¸ªé™åˆ¶åŒæ ·åº”ç”¨åˆ°äº† React Components:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// âœ… Okay to use `this` now</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isOn<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>è¿™æ®µä»£ç ç»™æˆ‘ä»¬ç•™ä¸‹äº†å¦ä¸€ä¸ªç–‘é—®ï¼š ä¸ºä»€ä¹ˆè®© props ä½œä¸º super çš„å‚æ•°ï¼Ÿ</p>\n<hr>\n<p>ä½ å¯èƒ½ä¼šæƒ³ï¼Œè®©<code class=\"language-text\">props</code>ä½œä¸º<code class=\"language-text\">super</code>çš„å‚æ•°ä¹‹æ‰€ä»¥éœ€è¦ï¼Œæ˜¯å› ä¸ºè¿™æ · åŸºç¡€çš„<code class=\"language-text\">React.Component</code> çš„ <code class=\"language-text\">constructor</code> èƒ½å¤Ÿåˆå§‹åŒ– <code class=\"language-text\">this.props</code>ï¼Œåƒè¿™æ ·ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Reactçš„å†…éƒ¨æ“ä½œï¼Œ React.Componentå¯¹è±¡</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä½ å¦‚æœè¿™æ ·æƒ³ï¼Œé‚£ä¹ˆä½ ç¦»çœŸç›¸ä¸è¿œäº†ï¼Œè¿™å°±æ˜¯<a href=\"https://github.com/facebook/react/blob/1d25aa5787d4e19704c049c3cfa985d3b5190e0d/packages/react/src/ReactBaseClasses.js#L22\">React æºç çš„æ“ä½œ</a>.</p>\n<p>ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œä½ è°ƒç”¨<code class=\"language-text\">super()</code>ä½†æ˜¯ä¸ä¼ å…¥<code class=\"language-text\">props</code>ï¼Œä½ ä¾æ—§å¯ä»¥åœ¨<code class=\"language-text\">render</code>æˆ–è€…å…¶ä»–æ–¹æ³•é‡Œé¢ä½¿ç”¨<code class=\"language-text\">this.props</code>ã€‚</p>\n<p>é‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿ è¿™å°±å¼•å‡ºäº† <strong>å½“è°ƒç”¨<code class=\"language-text\">constructor</code>ä¹‹åï¼ŒReact ä¹Ÿä¼šåœ¨å®ä¾‹ä¸Šç«‹å³åˆ†é…<code class=\"language-text\">props</code></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// React å†…éƒ¨</span>\n<span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">YourComponent</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\ninstance<span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props</code></pre></div>\n<p>æ‰€ä»¥ï¼Œå°±ç®—ä½ åœ¨å†™<code class=\"language-text\">super()</code>çš„æ—¶å€™å¿˜äº†ä¼ å…¥ propsï¼ŒReact ä¾æ—§ä¼šåœ¨ä¹‹åè®¾ç½®å®ƒä»¬ã€‚ä¸‹é¢è¯´ä¸‹è¿™ä¹ˆåšçš„åŸå› ã€‚</p>\n<p>React æ–°å¢äº†å¯¹ classes çš„æ”¯æŒï¼Œå®ƒä¸ä»…ä»…åªæ˜¯ä¸ºäº†æ”¯æŒ es6 çš„ classes ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ”¯æŒå°½å¯èƒ½å¤šçš„ class æŠ½è±¡ã€‚æˆ‘ä»¬<a href=\"https://reactjs.org/blog/2015/01/27/react-v0.13.0-beta-1.html#other-languages\">å¹¶ä¸æ¸…æ¥š</a> ClojureScript, CoffeeScript, ES6, Fable, Scala.js, TypeScript, å’Œä¸€äº›å…¶ä»–çš„è¯­è¨€ å®ƒä»¬å¯¹ç»„ä»¶çš„å®šä¹‰ï¼Œå“ªä¸€ç§ç›¸å¯¹æ¥è¯´ä¼šæ¯”è¾ƒæˆåŠŸã€‚æ‰€ä»¥ React æ•…æ„å¿½ç•¥äº†æ˜¯å¦å¿…é¡»è°ƒç”¨ super()è¿™ä¸€é—®é¢˜ - å°½ç®¡ es6 æ˜¯å¿…é¡»è°ƒç”¨çš„ã€‚</p>\n<p>é‚£ä¹ˆï¼Œè¿™æ˜¯å¦æ„å‘³ç€ä½ åªéœ€å†™<code class=\"language-text\">super()</code>æ¥ä»£æ›¿<code class=\"language-text\">super(props)</code>å‘¢ï¼Ÿ</p>\n<p><strong>ç­”æ¡ˆå¯èƒ½æ˜¯å¦å®šçš„ï¼Œå› ä¸ºè¿™é‡Œä»æœ‰ç–‘é—®</strong> å½“ç„¶ï¼ŒReact ä¼šåœ¨æ‰§è¡Œ constructor ä¹‹åç«‹åˆ»åˆ†å‘ <code class=\"language-text\">this.props</code>ã€‚ ä½†æ˜¯<code class=\"language-text\">this.props</code>åœ¨è°ƒç”¨<code class=\"language-text\">super</code> å’Œ æ‰§è¡Œå®Œ constructor ä¹‹é—´ ä»ç„¶æ˜¯ undefinedï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// React å†…éƒ¨</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ä½ çš„ä»£ç </span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Button</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// å¦‚æœè¿™é‡Œå¿˜äº†åŠ props</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token comment\">// {}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span> <span class=\"token comment\">// undefined</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>å¦‚æœåœ¨ constructor ä¸­æŸä¸ªæ–¹æ³•è°ƒç”¨äº†<code class=\"language-text\">this.props</code>ï¼Œä¸Šé¢çš„å†™æ³•å°±ä¼šç»™ debug å¸¦æ¥å¾ˆå¤§çš„æŒ‘æˆ˜ã€‚\n<strong>è¿™å°±æ˜¯æˆ‘ä¸ºå•¥å»ºè®®æ¯æ¬¡éƒ½å¾—å†™<code class=\"language-text\">super(props)</code>çš„åŸå› ï¼Œè™½ç„¶å®ƒä¸æ˜¯å¿…é¡»çš„ï¼š</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Button</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token comment\">// âœ… We passed props</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token comment\">// âœ… {}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span> <span class=\"token comment\">// âœ… {}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è¿™æ ·å°±èƒ½ä¿è¯åœ¨ constructor è¯ç”Ÿä¹‹å‰å°±è®¾ç½®äº†<code class=\"language-text\">this.props</code>ã€‚</p>\n<hr>\n<p>é•¿æœŸä»¥æ¥ï¼ŒReact ä½¿ç”¨è€…å¯èƒ½ä¼šæœ‰ä¸€ç‚¹ç–‘æƒ‘ã€‚</p>\n<p>å¤§å®¶å¯èƒ½æ³¨æ„åˆ°ï¼Œåœ¨ classes ä¸­ä½¿ç”¨ <code class=\"language-text\">context api</code> (ä¸ç®¡æ˜¯æ—§çš„ <code class=\"language-text\">contextTypes</code>è¿˜æ˜¯åœ¨ React16.6 ä¸­æ–°å¢çš„æ–°çš„<code class=\"language-text\">contextType</code> API), <code class=\"language-text\">context</code> éƒ½æ˜¯ä½œä¸º constructor çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚</p>\n<p>æ‰€ä»¥ä¸ºå•¥æˆ‘ä»¬ä¸æå€¡åƒ <code class=\"language-text\">super(props, context)</code> è¿™ç§å†™æ³•å‘¢ï¼Ÿ å…¶å®è¿™ç§å†™æ³•ä¹Ÿæ²¡é—®é¢˜ï¼Œä½†æ˜¯<code class=\"language-text\">context</code>ä½¿ç”¨é‡è¾ƒå°‘æ‰€ä»¥è¿™æ ·çš„é™·é˜±é‡åˆ°çš„ä¸å¤šã€‚</p>\n<p><strong>éšç€ class fields ææ¡ˆçš„è¯ç”Ÿï¼Œè¿™ä¸ªé™·è¿›å·²ç»å‡ ä¹æ¶ˆå¤±ã€‚</strong> ç°åœ¨æˆ‘ä»¬å‹æ ¹ä¸éœ€è¦å†™ constructor, æ‰€æœ‰çš„å‚æ•°éƒ½ä¼šè¢«è‡ªåŠ¨æ·»åŠ ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬ç›´æ¥è¿™æ ·å†™ï¼š <code class=\"language-text\">state={}</code>ï¼Œç„¶åå¯ä»¥åœ¨é‡Œé¢ç›´æ¥è°ƒç”¨<code class=\"language-text\">this.props</code> æˆ– <code class=\"language-text\">this.context</code>ã€‚</p>\n<p>æœ€åï¼Œéšç€ Hooks çš„è¯ç”Ÿï¼Œ æˆ‘ä»¬ç°åœ¨ç”šè‡³éƒ½ä¸è¦<code class=\"language-text\">super</code> å’Œ <code class=\"language-text\">this</code>ã€‚ ä¸è¿‡è¿™å°±æ˜¯ä¸‹ä¸ªè¯é¢˜äº†ã€‚</p>","timeToRead":7,"frontmatter":{"title":"ä¸ºä½•è¦å†™super(props)?","date":"November 30, 2018"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/why-we-write-super/","previous":null,"next":{"fields":{"slug":"/how-to-build-a-easy-blog/"},"frontmatter":{"title":"ä¸‰åˆ†é’Ÿå»ºæˆä¸ªäººç½‘ç«™ï¼Œé€¼æ ¼æé«˜ï¼ˆæŒç»­é›†æˆï¼‰"}}}}}